{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { fromType } from '../Nodes.js';\nimport { Loader } from 'three';\n\nvar NodeLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(NodeLoader, _Loader);\n\n  var _super = _createSuper(NodeLoader);\n\n  function NodeLoader(manager) {\n    var _this;\n\n    _classCallCheck(this, NodeLoader);\n\n    _this = _super.call(this, manager);\n    _this.textures = {};\n    return _this;\n  }\n\n  _createClass(NodeLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var _this2 = this;\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (text) {\n        try {\n          onLoad(_this2.parse(JSON.parse(text)));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n\n          _this2.manager.itemError(url);\n        }\n      }, onProgress, onError);\n    }\n  }, {\n    key: \"parseNodes\",\n    value: function parseNodes(json) {\n      var nodes = {};\n\n      if (json !== undefined) {\n        var _iterator = _createForOfIteratorHelper(json),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var nodeJSON = _step.value;\n            var uuid = nodeJSON.uuid,\n                _type = nodeJSON.type;\n            nodes[uuid] = fromType(_type);\n            nodes[uuid].uuid = uuid;\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        var meta = {\n          nodes: nodes,\n          textures: this.textures\n        };\n\n        var _iterator2 = _createForOfIteratorHelper(json),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _nodeJSON = _step2.value;\n            _nodeJSON.meta = meta;\n            var node = nodes[_nodeJSON.uuid];\n            node.deserialize(_nodeJSON);\n            delete _nodeJSON.meta;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      return nodes;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(json) {\n      var node = fromType(type);\n      node.uuid = json.uuid;\n      var nodes = this.parseNodes(json.inputNodes);\n      var meta = {\n        nodes: nodes,\n        textures: this.textures\n      };\n      json.meta = meta;\n      node.deserialize(json);\n      delete json.meta;\n      return node;\n    }\n  }, {\n    key: \"setTextures\",\n    value: function setTextures(value) {\n      this.textures = value;\n      return this;\n    }\n  }]);\n\n  return NodeLoader;\n}(Loader);\n\nexport default NodeLoader;","map":{"version":3,"sources":["C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/three-stdlib/nodes/loaders/NodeLoader.js"],"names":["fromType","Loader","NodeLoader","manager","textures","url","onLoad","onProgress","onError","loader","FileLoader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","text","parse","JSON","e","console","error","itemError","json","nodes","undefined","nodeJSON","uuid","type","meta","node","deserialize","parseNodes","inputNodes","value"],"mappings":"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","sourcesContent":["import { fromType } from '../Nodes.js';\nimport { Loader } from 'three';\n\nclass NodeLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n    this.textures = {};\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setRequestHeader(this.requestHeader);\n    loader.setWithCredentials(this.withCredentials);\n    loader.load(url, text => {\n      try {\n        onLoad(this.parse(JSON.parse(text)));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        this.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  }\n\n  parseNodes(json) {\n    const nodes = {};\n\n    if (json !== undefined) {\n      for (const nodeJSON of json) {\n        const {\n          uuid,\n          type\n        } = nodeJSON;\n        nodes[uuid] = fromType(type);\n        nodes[uuid].uuid = uuid;\n      }\n\n      const meta = {\n        nodes,\n        textures: this.textures\n      };\n\n      for (const nodeJSON of json) {\n        nodeJSON.meta = meta;\n        const node = nodes[nodeJSON.uuid];\n        node.deserialize(nodeJSON);\n        delete nodeJSON.meta;\n      }\n    }\n\n    return nodes;\n  }\n\n  parse(json) {\n    const node = fromType(type);\n    node.uuid = json.uuid;\n    const nodes = this.parseNodes(json.inputNodes);\n    const meta = {\n      nodes,\n      textures: this.textures\n    };\n    json.meta = meta;\n    node.deserialize(json);\n    delete json.meta;\n    return node;\n  }\n\n  setTextures(value) {\n    this.textures = value;\n    return this;\n  }\n\n}\n\nexport default NodeLoader;\n"]},"metadata":{},"sourceType":"module"}