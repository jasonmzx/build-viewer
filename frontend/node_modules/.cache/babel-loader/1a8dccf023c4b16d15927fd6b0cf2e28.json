{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport LightNode from './LightNode.js';\n\nvar sortLights = function sortLights(lights) {\n  return lights.sort(function (a, b) {\n    return a.id - b.id;\n  });\n};\n\nvar LightsNode = /*#__PURE__*/function (_Node) {\n  _inherits(LightsNode, _Node);\n\n  var _super = _createSuper(LightsNode);\n\n  function LightsNode() {\n    var _this;\n\n    var lightNodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, LightsNode);\n\n    _this = _super.call(this, 'vec3');\n    _this.lightNodes = lightNodes;\n    _this._hash = null;\n    return _this;\n  }\n\n  _createClass(LightsNode, [{\n    key: \"hasLight\",\n    get: function get() {\n      return this.lightNodes.length > 0;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var lightNodes = this.lightNodes;\n\n      var _iterator = _createForOfIteratorHelper(lightNodes),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var lightNode = _step.value;\n          lightNode.build(builder);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return 'vec3( 0.0 )';\n    }\n  }, {\n    key: \"getHash\",\n    value: function getHash() {\n      if (this._hash === null) {\n        var hash = '';\n        var lightNodes = this.lightNodes;\n\n        var _iterator2 = _createForOfIteratorHelper(lightNodes),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var lightNode = _step2.value;\n            hash += lightNode.light.uuid + ' ';\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        this._hash = hash;\n      }\n\n      return this._hash;\n    }\n  }, {\n    key: \"getLightNodeByHash\",\n    value: function getLightNodeByHash(hash) {\n      var lightNodes = this.lightNodes;\n\n      var _iterator3 = _createForOfIteratorHelper(lightNodes),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var lightNode = _step3.value;\n\n          if (lightNode.light.uuid === hash) {\n            return lightNode;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"fromLights\",\n    value: function fromLights(lights) {\n      var lightNodes = [];\n      lights = sortLights(lights);\n\n      var _iterator4 = _createForOfIteratorHelper(lights),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var light = _step4.value;\n          var lightNode = this.getLightNodeByHash(light.uuid);\n\n          if (lightNode === null) {\n            lightNode = new LightNode(light);\n          }\n\n          lightNodes.push(lightNode);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      this.lightNodes = lightNodes;\n      this._hash = null;\n      return this;\n    }\n  }]);\n\n  return LightsNode;\n}(Node);\n\nexport default LightsNode;","map":{"version":3,"sources":["C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/three-stdlib/nodes/lights/LightsNode.js"],"names":["Node","LightNode","sortLights","lights","sort","a","b","id","LightsNode","lightNodes","_hash","length","builder","lightNode","build","hash","light","uuid","getLightNodeByHash","push"],"mappings":";;;;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;AAC3B,SAAOA,MAAM,CAACC,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUD,CAAC,CAACE,EAAF,GAAOD,CAAC,CAACC,EAAnB;AAAA,GAAZ,CAAP;AACD,CAFD;;IAIMC,U;;;;;AACJ,wBAA6B;AAAA;;AAAA,QAAjBC,UAAiB,uEAAJ,EAAI;;AAAA;;AAC3B,8BAAM,MAAN;AACA,UAAKA,UAAL,GAAkBA,UAAlB;AACA,UAAKC,KAAL,GAAa,IAAb;AAH2B;AAI5B;;;;SAED,eAAe;AACb,aAAO,KAAKD,UAAL,CAAgBE,MAAhB,GAAyB,CAAhC;AACD;;;WAED,kBAASC,OAAT,EAAkB;AAChB,UAAMH,UAAU,GAAG,KAAKA,UAAxB;;AADgB,iDAGQA,UAHR;AAAA;;AAAA;AAGhB,4DAAoC;AAAA,cAAzBI,SAAyB;AAClCA,UAAAA,SAAS,CAACC,KAAV,CAAgBF,OAAhB;AACD;AALe;AAAA;AAAA;AAAA;AAAA;;AAOhB,aAAO,aAAP;AACD;;;WAED,mBAAU;AACR,UAAI,KAAKF,KAAL,KAAe,IAAnB,EAAyB;AACvB,YAAIK,IAAI,GAAG,EAAX;AACA,YAAMN,UAAU,GAAG,KAAKA,UAAxB;;AAFuB,oDAICA,UAJD;AAAA;;AAAA;AAIvB,iEAAoC;AAAA,gBAAzBI,SAAyB;AAClCE,YAAAA,IAAI,IAAIF,SAAS,CAACG,KAAV,CAAgBC,IAAhB,GAAuB,GAA/B;AACD;AANsB;AAAA;AAAA;AAAA;AAAA;;AAQvB,aAAKP,KAAL,GAAaK,IAAb;AACD;;AAED,aAAO,KAAKL,KAAZ;AACD;;;WAED,4BAAmBK,IAAnB,EAAyB;AACvB,UAAMN,UAAU,GAAG,KAAKA,UAAxB;;AADuB,kDAGCA,UAHD;AAAA;;AAAA;AAGvB,+DAAoC;AAAA,cAAzBI,SAAyB;;AAClC,cAAIA,SAAS,CAACG,KAAV,CAAgBC,IAAhB,KAAyBF,IAA7B,EAAmC;AACjC,mBAAOF,SAAP;AACD;AACF;AAPsB;AAAA;AAAA;AAAA;AAAA;;AASvB,aAAO,IAAP;AACD;;;WAED,oBAAWV,MAAX,EAAmB;AACjB,UAAMM,UAAU,GAAG,EAAnB;AACAN,MAAAA,MAAM,GAAGD,UAAU,CAACC,MAAD,CAAnB;;AAFiB,kDAIGA,MAJH;AAAA;;AAAA;AAIjB,+DAA4B;AAAA,cAAjBa,KAAiB;AAC1B,cAAIH,SAAS,GAAG,KAAKK,kBAAL,CAAwBF,KAAK,CAACC,IAA9B,CAAhB;;AAEA,cAAIJ,SAAS,KAAK,IAAlB,EAAwB;AACtBA,YAAAA,SAAS,GAAG,IAAIZ,SAAJ,CAAce,KAAd,CAAZ;AACD;;AAEDP,UAAAA,UAAU,CAACU,IAAX,CAAgBN,SAAhB;AACD;AAZgB;AAAA;AAAA;AAAA;AAAA;;AAcjB,WAAKJ,UAAL,GAAkBA,UAAlB;AACA,WAAKC,KAAL,GAAa,IAAb;AACA,aAAO,IAAP;AACD;;;;EAjEsBV,I;;AAqEzB,eAAeQ,UAAf","sourcesContent":["import Node from '../core/Node.js';\nimport LightNode from './LightNode.js';\n\nconst sortLights = lights => {\n  return lights.sort((a, b) => a.id - b.id);\n};\n\nclass LightsNode extends Node {\n  constructor(lightNodes = []) {\n    super('vec3');\n    this.lightNodes = lightNodes;\n    this._hash = null;\n  }\n\n  get hasLight() {\n    return this.lightNodes.length > 0;\n  }\n\n  generate(builder) {\n    const lightNodes = this.lightNodes;\n\n    for (const lightNode of lightNodes) {\n      lightNode.build(builder);\n    }\n\n    return 'vec3( 0.0 )';\n  }\n\n  getHash() {\n    if (this._hash === null) {\n      let hash = '';\n      const lightNodes = this.lightNodes;\n\n      for (const lightNode of lightNodes) {\n        hash += lightNode.light.uuid + ' ';\n      }\n\n      this._hash = hash;\n    }\n\n    return this._hash;\n  }\n\n  getLightNodeByHash(hash) {\n    const lightNodes = this.lightNodes;\n\n    for (const lightNode of lightNodes) {\n      if (lightNode.light.uuid === hash) {\n        return lightNode;\n      }\n    }\n\n    return null;\n  }\n\n  fromLights(lights) {\n    const lightNodes = [];\n    lights = sortLights(lights);\n\n    for (const light of lights) {\n      let lightNode = this.getLightNodeByHash(light.uuid);\n\n      if (lightNode === null) {\n        lightNode = new LightNode(light);\n      }\n\n      lightNodes.push(lightNode);\n    }\n\n    this.lightNodes = lightNodes;\n    this._hash = null;\n    return this;\n  }\n\n}\n\nexport default LightsNode;\n"]},"metadata":{},"sourceType":"module"}