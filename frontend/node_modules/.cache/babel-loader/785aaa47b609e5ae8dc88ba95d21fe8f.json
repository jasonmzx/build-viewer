{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { ShaderMaterial, Material } from 'three';\nimport { getNodesKeys } from '../core/NodeUtils.js';\n\nvar NodeMaterial = /*#__PURE__*/function (_ShaderMaterial) {\n  _inherits(NodeMaterial, _ShaderMaterial);\n\n  var _super = _createSuper(NodeMaterial);\n\n  function NodeMaterial() {\n    var _this;\n\n    _classCallCheck(this, NodeMaterial);\n\n    _this = _super.call(this);\n    _this.type = _this.constructor.name;\n    _this.lights = true;\n    return _this;\n  }\n\n  _createClass(NodeMaterial, [{\n    key: \"setDefaultValues\",\n    value: function setDefaultValues(values) {\n      // This approach is to reuse the native refreshUniforms*\n      // and turn available the use of features like transmission and environment in core\n      var value;\n\n      for (var property in values) {\n        value = values[property];\n\n        if (this[property] === undefined) {\n          if (value && typeof value.clone === 'function') {\n            this[property] = value.clone();\n          } else {\n            this[property] = value;\n          }\n        }\n      }\n\n      Object.assign(this.defines, values.defines);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var isRoot = meta === undefined || typeof meta === 'string';\n\n      if (isRoot) {\n        meta = {\n          textures: {},\n          images: {},\n          nodes: {}\n        };\n      }\n\n      var data = Material.prototype.toJSON.call(this, meta);\n      var nodeKeys = getNodesKeys(this);\n      data.inputNodes = {};\n\n      var _iterator = _createForOfIteratorHelper(nodeKeys),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var name = _step.value;\n          data.inputNodes[name] = this[name].toJSON(meta).uuid;\n        } // TODO: Copied from Object3D.toJSON\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      function extractFromCache(cache) {\n        var values = [];\n\n        for (var key in cache) {\n          var _data = cache[key];\n          delete _data.metadata;\n          values.push(_data);\n        }\n\n        return values;\n      }\n\n      if (isRoot) {\n        var textures = extractFromCache(meta.textures);\n        var images = extractFromCache(meta.images);\n        var nodes = extractFromCache(meta.nodes);\n        if (textures.length > 0) data.textures = textures;\n        if (images.length > 0) data.images = images;\n        if (nodes.length > 0) data.nodes = nodes;\n      }\n\n      return data;\n    }\n  }]);\n\n  return NodeMaterial;\n}(ShaderMaterial);\n\nNodeMaterial.prototype.isNodeMaterial = true;\nexport default NodeMaterial;","map":{"version":3,"sources":["C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/three-stdlib/nodes/materials/NodeMaterial.js"],"names":["ShaderMaterial","Material","getNodesKeys","NodeMaterial","type","constructor","name","lights","values","value","property","undefined","clone","Object","assign","defines","meta","isRoot","textures","images","nodes","data","prototype","toJSON","call","nodeKeys","inputNodes","uuid","extractFromCache","cache","key","metadata","push","length","isNodeMaterial"],"mappings":"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","sourcesContent":["import { ShaderMaterial, Material } from 'three';\nimport { getNodesKeys } from '../core/NodeUtils.js';\n\nclass NodeMaterial extends ShaderMaterial {\n  constructor() {\n    super();\n    this.type = this.constructor.name;\n    this.lights = true;\n  }\n\n  setDefaultValues(values) {\n    // This approach is to reuse the native refreshUniforms*\n    // and turn available the use of features like transmission and environment in core\n    let value;\n\n    for (const property in values) {\n      value = values[property];\n\n      if (this[property] === undefined) {\n        if (value && typeof value.clone === 'function') {\n          this[property] = value.clone();\n        } else {\n          this[property] = value;\n        }\n      }\n    }\n\n    Object.assign(this.defines, values.defines);\n  }\n\n  toJSON(meta) {\n    const isRoot = meta === undefined || typeof meta === 'string';\n\n    if (isRoot) {\n      meta = {\n        textures: {},\n        images: {},\n        nodes: {}\n      };\n    }\n\n    const data = Material.prototype.toJSON.call(this, meta);\n    const nodeKeys = getNodesKeys(this);\n    data.inputNodes = {};\n\n    for (const name of nodeKeys) {\n      data.inputNodes[name] = this[name].toJSON(meta).uuid;\n    } // TODO: Copied from Object3D.toJSON\n\n\n    function extractFromCache(cache) {\n      const values = [];\n\n      for (const key in cache) {\n        const data = cache[key];\n        delete data.metadata;\n        values.push(data);\n      }\n\n      return values;\n    }\n\n    if (isRoot) {\n      const textures = extractFromCache(meta.textures);\n      const images = extractFromCache(meta.images);\n      const nodes = extractFromCache(meta.nodes);\n      if (textures.length > 0) data.textures = textures;\n      if (images.length > 0) data.images = images;\n      if (nodes.length > 0) data.nodes = nodes;\n    }\n\n    return data;\n  }\n\n}\n\nNodeMaterial.prototype.isNodeMaterial = true;\n\nexport default NodeMaterial;\n"]},"metadata":{},"sourceType":"module"}