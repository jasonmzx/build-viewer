{"ast":null,"code":"import _slicedToArray from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useFrame, useThree } from '@react-three/fiber';\nimport * as React from 'react';\nimport { Vector3, Object3D, Vector2 } from 'three';\nimport { MeshLine, MeshLineMaterial } from 'meshline';\nvar defaults = {\n  width: 0.2,\n  length: 1,\n  decay: 1,\n  local: false,\n  stride: 0,\n  interval: 1\n};\n\nvar shiftLeft = function shiftLeft(collection) {\n  var steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  collection.set(collection.subarray(steps));\n  collection.fill(-Infinity, -steps);\n  return collection;\n};\n\nfunction useTrail(target, settings) {\n  var _defaults$settings = _objectSpread(_objectSpread({}, defaults), settings),\n      length = _defaults$settings.length,\n      local = _defaults$settings.local,\n      decay = _defaults$settings.decay,\n      interval = _defaults$settings.interval,\n      stride = _defaults$settings.stride;\n\n  var points = React.useRef();\n\n  var _React$useState = React.useState(function () {\n    return new Vector3();\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      worldPosition = _React$useState2[0];\n\n  React.useLayoutEffect(function () {\n    if (target) {\n      points.current = Float32Array.from({\n        length: length * 10 * 3\n      }, function (_, i) {\n        return target.position.getComponent(i % 3);\n      });\n    }\n  }, [length, target]);\n  var prevPosition = React.useRef(new Vector3());\n  var frameCount = React.useRef(0);\n  useFrame(function () {\n    if (!target) return;\n    if (!points.current) return;\n\n    if (frameCount.current === 0) {\n      var newPosition;\n\n      if (local) {\n        newPosition = target.position;\n      } else {\n        target.getWorldPosition(worldPosition);\n        newPosition = worldPosition;\n      }\n\n      var steps = 1 * decay;\n\n      for (var i = 0; i < steps; i++) {\n        if (newPosition.distanceTo(prevPosition.current) < stride) continue;\n        shiftLeft(points.current, 3);\n        points.current.set(newPosition.toArray(), points.current.length - 3);\n      }\n\n      prevPosition.current.copy(newPosition);\n    }\n\n    frameCount.current++;\n    frameCount.current = frameCount.current % interval;\n  });\n  return points;\n}\n\nvar Trail = /*#__PURE__*/React.forwardRef(function (props, forwardRef) {\n  var children = props.children;\n\n  var _defaults$props = _objectSpread(_objectSpread({}, defaults), props),\n      width = _defaults$props.width,\n      length = _defaults$props.length,\n      decay = _defaults$props.decay,\n      local = _defaults$props.local,\n      stride = _defaults$props.stride,\n      interval = _defaults$props.interval;\n\n  var _props$color = props.color,\n      color = _props$color === void 0 ? 'hotpink' : _props$color,\n      attenuation = props.attenuation,\n      target = props.target;\n  var size = useThree(function (s) {\n    return s.size;\n  });\n  var ref = React.useRef(null);\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      anchor = _React$useState4[0],\n      setAnchor = _React$useState4[1];\n\n  var points = useTrail(anchor, {\n    length: length,\n    decay: decay,\n    local: local,\n    stride: stride,\n    interval: interval\n  });\n  React.useEffect(function () {\n    var t = (target == null ? void 0 : target.current) || ref.current.children.find(function (o) {\n      return o instanceof Object3D;\n    });\n\n    if (t) {\n      setAnchor(t);\n    }\n  }, [points, target]);\n  var geo = React.useMemo(function () {\n    return new MeshLine();\n  }, []);\n  var mat = React.useMemo(function () {\n    var _matOverride;\n\n    var m = new MeshLineMaterial({\n      lineWidth: 0.1 * width,\n      color: color,\n      sizeAttenuation: 1,\n      resolution: new Vector2(size.width, size.height)\n    }); // Get and apply first <meshLineMaterial /> from children\n\n    var matOverride;\n\n    if (children) {\n      if (Array.isArray(children)) {\n        matOverride = children.find(function (child) {\n          var c = child;\n          return typeof c.type === 'string' && c.type === 'meshLineMaterial';\n        });\n      } else {\n        var c = children;\n\n        if (typeof c.type === 'string' && c.type === 'meshLineMaterial') {\n          matOverride = c;\n        }\n      }\n    }\n\n    if (typeof ((_matOverride = matOverride) == null ? void 0 : _matOverride.props) === 'object') {\n      m.setValues(matOverride.props);\n    }\n\n    return m;\n  }, [width, color, size, children]);\n  React.useEffect(function () {\n    mat.uniforms.resolution.value.set(size.width, size.height);\n  }, [size]);\n  useFrame(function () {\n    if (!points.current) return;\n    geo.setPoints(points.current, attenuation);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", null, /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: forwardRef,\n    geometry: geo,\n    material: mat\n  }), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children));\n});\nexport { Trail, useTrail };","map":{"version":3,"sources":["C:/Users/jason/Documents/GitHub/build-viewer/frontend/node_modules/@react-three/drei/core/Trail.js"],"names":["useFrame","useThree","React","Vector3","Object3D","Vector2","MeshLine","MeshLineMaterial","defaults","width","length","decay","local","stride","interval","shiftLeft","collection","steps","set","subarray","fill","Infinity","useTrail","target","settings","points","useRef","useState","worldPosition","useLayoutEffect","current","Float32Array","from","_","i","position","getComponent","prevPosition","frameCount","newPosition","getWorldPosition","distanceTo","toArray","copy","Trail","forwardRef","props","children","color","attenuation","size","s","ref","anchor","setAnchor","useEffect","t","find","o","geo","useMemo","mat","_matOverride","m","lineWidth","sizeAttenuation","resolution","height","matOverride","Array","isArray","child","c","type","setValues","uniforms","value","setPoints","createElement","geometry","material"],"mappings":"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","sourcesContent":["import { useFrame, useThree } from '@react-three/fiber';\nimport * as React from 'react';\nimport { Vector3, Object3D, Vector2 } from 'three';\nimport { MeshLine, MeshLineMaterial } from 'meshline';\n\nconst defaults = {\n  width: 0.2,\n  length: 1,\n  decay: 1,\n  local: false,\n  stride: 0,\n  interval: 1\n};\n\nconst shiftLeft = (collection, steps = 1) => {\n  collection.set(collection.subarray(steps));\n  collection.fill(-Infinity, -steps);\n  return collection;\n};\n\nfunction useTrail(target, settings) {\n  const {\n    length,\n    local,\n    decay,\n    interval,\n    stride\n  } = { ...defaults,\n    ...settings\n  };\n  const points = React.useRef();\n  const [worldPosition] = React.useState(() => new Vector3());\n  React.useLayoutEffect(() => {\n    if (target) {\n      points.current = Float32Array.from({\n        length: length * 10 * 3\n      }, (_, i) => target.position.getComponent(i % 3));\n    }\n  }, [length, target]);\n  const prevPosition = React.useRef(new Vector3());\n  const frameCount = React.useRef(0);\n  useFrame(() => {\n    if (!target) return;\n    if (!points.current) return;\n\n    if (frameCount.current === 0) {\n      let newPosition;\n\n      if (local) {\n        newPosition = target.position;\n      } else {\n        target.getWorldPosition(worldPosition);\n        newPosition = worldPosition;\n      }\n\n      const steps = 1 * decay;\n\n      for (let i = 0; i < steps; i++) {\n        if (newPosition.distanceTo(prevPosition.current) < stride) continue;\n        shiftLeft(points.current, 3);\n        points.current.set(newPosition.toArray(), points.current.length - 3);\n      }\n\n      prevPosition.current.copy(newPosition);\n    }\n\n    frameCount.current++;\n    frameCount.current = frameCount.current % interval;\n  });\n  return points;\n}\nconst Trail = /*#__PURE__*/React.forwardRef((props, forwardRef) => {\n  const {\n    children\n  } = props;\n  const {\n    width,\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  } = { ...defaults,\n    ...props\n  };\n  const {\n    color = 'hotpink',\n    attenuation,\n    target\n  } = props;\n  const size = useThree(s => s.size);\n  const ref = React.useRef(null);\n  const [anchor, setAnchor] = React.useState(null);\n  const points = useTrail(anchor, {\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  });\n  React.useEffect(() => {\n    const t = (target == null ? void 0 : target.current) || ref.current.children.find(o => {\n      return o instanceof Object3D;\n    });\n\n    if (t) {\n      setAnchor(t);\n    }\n  }, [points, target]);\n  const geo = React.useMemo(() => new MeshLine(), []);\n  const mat = React.useMemo(() => {\n    var _matOverride;\n\n    const m = new MeshLineMaterial({\n      lineWidth: 0.1 * width,\n      color: color,\n      sizeAttenuation: 1,\n      resolution: new Vector2(size.width, size.height)\n    }); // Get and apply first <meshLineMaterial /> from children\n\n    let matOverride;\n\n    if (children) {\n      if (Array.isArray(children)) {\n        matOverride = children.find(child => {\n          const c = child;\n          return typeof c.type === 'string' && c.type === 'meshLineMaterial';\n        });\n      } else {\n        const c = children;\n\n        if (typeof c.type === 'string' && c.type === 'meshLineMaterial') {\n          matOverride = c;\n        }\n      }\n    }\n\n    if (typeof ((_matOverride = matOverride) == null ? void 0 : _matOverride.props) === 'object') {\n      m.setValues(matOverride.props);\n    }\n\n    return m;\n  }, [width, color, size, children]);\n  React.useEffect(() => {\n    mat.uniforms.resolution.value.set(size.width, size.height);\n  }, [size]);\n  useFrame(() => {\n    if (!points.current) return;\n    geo.setPoints(points.current, attenuation);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", null, /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: forwardRef,\n    geometry: geo,\n    material: mat\n  }), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children));\n});\n\nexport { Trail, useTrail };\n"]},"metadata":{},"sourceType":"module"}